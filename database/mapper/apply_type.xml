<?xml version="1.0" encoding="utf-8"?>
<sql id="apply_type">
    <insert id="add">
        insert into
            apply_type(name,pid,type)
        values(
            {{name | q}},
            {{pid | q}},
            {{type | q}}
        )
    </insert>
    <delete id="delete">
        delete from
            apply_type
        where
            id = {{id | q}}
    </delete>
    <select id="listByType">
        select
            id,name text,id value
        from
            apply_type
        where
            {{type | eq:'type'}}
    </select>

    <select id="listByPid">
        select
            id,name text,id value
        from
            apply_type
        where
            {{pid | eq:'pid'}}
    </select>

    <select id="pageQuery">
        select
            t1.*,t2.name pname
        from
            apply_type t1
        left join
            apply_type t2
            on t1.pid = t2.id
        order by
            t1.pid asc,t1.id asc
    </select>

    <select id="isUnique">
        select
            count(1)
        from
            apply_type
        where
            name = {{name | q}}
            {{id | and:'id','neq'}}

    </select>
</sql>